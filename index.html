<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fireworks Surprise for Tita Rane</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0b1020; 
      --bg2:#030711; 
      --accent:#ffffff; 
      --accent2:#ffffff; 
      --glass: rgba(255,255,255,.07);
      --glass-border: rgba(255, 255, 255, 0.2);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; overflow:hidden;
      background:radial-gradient(1200px 700px at 50% -200px, #1a2240, var(--bg2));
      font-family:'Montserrat',sans-serif;
      color:#fff;
    }
    .scene{ position:relative; width:100vw; height:100vh; }

    /* STARS */
    .stars,.stars:before,.stars:after{
      content:""; position:absolute; inset:-10% -10% 0 -10%; background-repeat:repeat;
      background-image: radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,.5) 99%, transparent),
                       radial-gradient(1px 1px at 80px 110px, rgba(255,255,255,.35) 99%, transparent),
                       radial-gradient(1px 1px at 130px 90px, rgba(255,255,255,.35) 99%, transparent),
                       radial-gradient(1px 1px at 170px 40px, rgba(255,255,255,.45) 99%, transparent);
      background-size:200px 200px; opacity:.5;
      animation:drift 80s linear infinite; pointer-events:none;
    }
    .stars:before{ opacity:.35; filter:blur(0.5px); animation-duration:120s }
    .stars:after{ opacity:.2; filter:blur(1px); animation-duration:160s }
    @keyframes drift{ to{ transform:translateY(-200px) } }

    /* MOON */
    .moon{ position:absolute; top:6vh; left:8vw; width:min(90px,18vw); aspect-ratio:1; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #fff 0%, #f3f5ff 35%, #cfd6ff 60%, rgba(255,255,255,0) 62%),
                  radial-gradient(circle at 50% 55%, rgba(0,0,0,.18) 0 60%, rgba(0,0,0,0) 62%);
      box-shadow:0 0 40px rgba(255,255,255,.25); opacity:.9; pointer-events:none;
    }

    canvas{ position:absolute; inset:0; width:100%; height:100%; display:block; }

    /* ENVELOPE */
    .envelope-container{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:10; background:var(--bg2);}
    .envelope{ position:relative; width:300px; height:200px; background:#f8f3e7; border:2px solid #d4c5a3; box-shadow:0 8px 20px rgba(0,0,0,.4); cursor:pointer; }
    .flap{ position:absolute; top:0; left:0; width:100%; height:100%; background:linear-gradient(to bottom,#f1e7d0,#e8dcc0); clip-path:polygon(0 0,100% 0,50% 55%); transform-origin:top; transition:transform 1s ease; z-index:3;}
    .envelope.open .flap{ transform:rotateX(180deg); }
    .wax-seal{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:60px; height:60px; background:#c0392b; border-radius:50%; box-shadow:0 0 10px rgba(0,0,0,.4); display:flex; align-items:center; justify-content:center; font-size:24px; color:#fff; z-index:4; transition:opacity .8s ease;}
    .envelope.open .wax-seal{ opacity:0; }

    /* CARD (Dark Glassy) */
    .card{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) scale(0.8);
      padding:28px 38px; text-align:center; background:rgb(255, 255, 255); 
      border-radius:22px; min-width:min(340px, 86vw); 
      border:2px solid transparent; background-clip:padding-box, border-box;
      background-image:linear-gradient(rgba(255, 255, 255, 0.55),rgba(15,15,30,.55)),linear-gradient(rgb(255, 255, 255)#ff9bd2,#ffffff,#c084fc);
      box-shadow:0 0 30px rgba(255, 255, 255, 0.6);
      opacity:0; transition:opacity 1s ease, transform 1s ease; z-index:5; overflow:hidden;
    }
    .card.show{ opacity:1; transform:translate(-50%,-50%) scale(1); }

    .card img{ width:160px; height:160px; border-radius:50%; object-fit:cover; margin-bottom:18px;
      opacity:0; transform:scale(0.5); animation:fadeZoom 1s forwards; animation-delay:.3s; }
    .card.show img{ animation:fadeZoom 1s forwards; }

    @keyframes fadeZoom{
      to{ opacity:1; transform:scale(1); }
    }

    .card h1 {
  font-family:'Montserrat', sans-serif; /* plain font */
  font-weight:700; 
  font-size:clamp(36px,7vw,72px); 
  margin:.1rem 0 .6rem;
  color:#ffffff; /* plain white text */
}

    .card p{ font-family:'Montserrat',sans-serif; font-size:clamp(18px,3vw,28px); font-weight:600; margin:0;
      color:#000000; text-shadow:0 0 8px rgba(255, 255, 255, 0.6);
      opacity:0; transform:translateY(20px); animation:fadeUp 1s forwards; animation-delay:1.2s;
    }
    @keyframes fadeUp{ to{ opacity:1; transform:translateY(0);} }

  </style>
  <script>
  // --- MUSIC SETUP (Web Audio API, chiptune style) ---
  function playHappyBirthday(){
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioContext();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = "square"; // retro sound
    o.connect(g);
    g.connect(ctx.destination);
    let t = ctx.currentTime;

    // Happy Birthday melody
    const notes = [
      [264,0.4],[264,0.4],[297,0.8],[264,0.8],[352,0.8],[330,1.6],
      [264,0.4],[264,0.4],[297,0.8],[264,0.8],[396,0.8],[352,1.6],
      [264,0.4],[264,0.4],[528,0.8],[440,0.8],[352,0.8],[330,0.8],[297,1.2],
      [466,0.4],[466,0.4],[440,0.8],[352,0.8],[396,0.8],[352,1.6]
    ];

    notes.forEach(n=>{
      o.frequency.setValueAtTime(n[0],t);
      g.gain.setValueAtTime(0.2,t);
      t+=n[1];
    });

    o.start();
    o.stop(t);
  }
</script>

</head>
<body>
  <div class="scene">
    <div class="stars"></div>
    <div class="moon"></div>
    <canvas id="sky"></canvas>

    <!-- ENVELOPE -->
    <div class="envelope-container" id="envelopeContainer">
      <div class="envelope" id="envelope">
        <div class="flap"></div>
        <div class="wax-seal">ðŸ’Œ</div>
      </div>
    </div>

    <!-- CARD -->
    <div class="card" id="card">
      <img src="d4fc8d91-4567-41ed-a35f-1ffe55be709d.jpg" alt="Tita Rane">
      <h1>HAPPY BIRTHDAY TITA RANE!</h1>
      <p>SANA MABUHAY KAPA NG MATAGAL!</p>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('sky'), ctx = canvas.getContext('2d');
    let cw,ch,dpr;
    function resize(){
      dpr=Math.min(window.devicePixelRatio||1,2);
      cw=canvas.width=Math.floor(innerWidth*dpr);
      ch=canvas.height=Math.floor(innerHeight*dpr);
      canvas.style.width=innerWidth+'px'; canvas.style.height=innerHeight+'px';
    }
    addEventListener('resize',resize,{passive:true}); resize();

    const rand=(min,max)=>Math.random()*(max-min)+min;
    const TAU=Math.PI*2;
    const palette=['#ff6ec7','#9aa7ff','#ffd166','#06d6a0','#f78c6c','#c084fc','#60a5fa'];

    class Particle{ constructor(x,y,color){
      this.x=x; this.y=y; this.color=color;
      const angle=rand(0,TAU), speed=rand(1.5,4.6)*dpr;
      this.vx=Math.cos(angle)*speed; this.vy=Math.sin(angle)*speed;
      this.life=rand(50,90); this.alpha=1; this.size=rand(1.2,2.6)*dpr; this.drag=0.985; this.gravity=0.06*dpr;
    }
    step(){ this.vx*=this.drag; this.vy=this.vy*this.drag+this.gravity; this.x+=this.vx; this.y+=this.vy; this.life--; this.alpha=Math.max(0,this.life/90);}
    draw(){ ctx.globalAlpha=this.alpha; ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,TAU); ctx.fill();}
    get done(){ return this.life<=0||this.alpha<=0.02 } }

    class Firework{ constructor(sx,sy,tx,ty,color){
      this.x=sx; this.y=sy; this.tx=tx; this.ty=ty; this.color=color;
      const dx=tx-sx, dy=ty-sy, dist=Math.hypot(dx,dy);
      this.vx=dx/(dist/rand(6.5,8.5)); this.vy=dy/(dist/rand(6.5,8.5));
      this.trail=[]; this.exploded=false; this.particles=[];
    }
    step(){ if(!this.exploded){
        this.trail.push({x:this.x,y:this.y}); if(this.trail.length>8) this.trail.shift();
        this.x+=this.vx; this.y+=this.vy;
        const reached=(Math.abs(this.x-this.tx)<6*dpr&&Math.abs(this.y-this.ty)<6*dpr)||this.y<=this.ty;
        if(reached){ this.exploded=true; const count=Math.floor(rand(40,80)); for(let i=0;i<count;i++) this.particles.push(new Particle(this.x,this.y,this.color)); }
      } else { this.particles.forEach(p=>p.step()); this.particles=this.particles.filter(p=>!p.done);}
    }
    draw(){ if(!this.exploded){
        ctx.globalCompositeOperation='lighter'; ctx.strokeStyle=this.color; ctx.lineWidth=2*dpr; ctx.globalAlpha=.5;
        ctx.beginPath(); for(let i=0;i<this.trail.length;i++){ const t=this.trail[i]; if(i===0) ctx.moveTo(t.x,t.y); else ctx.lineTo(t.x,t.y);} ctx.stroke();
        ctx.globalAlpha=1; ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,2.5*dpr,0,TAU); ctx.fill();
      } else { ctx.globalCompositeOperation='lighter'; this.particles.forEach(p=>p.draw()); }
      ctx.globalCompositeOperation='source-over';
    }
    get done(){ return this.exploded&&this.particles.length===0 } }

    const fireworks=[]; let animId;
    function clearSky(){ ctx.globalAlpha=0.18; ctx.fillStyle='#0a0f1f'; ctx.fillRect(0,0,cw,ch); ctx.globalAlpha=1; }
    function loop(){ clearSky(); for(let i=fireworks.length-1;i>=0;i--){ const f=fireworks[i]; f.step(); f.draw(); if(f.done) fireworks.splice(i,1);} animId=requestAnimationFrame(loop);}
    loop();

    const card=document.getElementById('card');
    function launch(x,y){ const color=palette[Math.floor(rand(0,palette.length))]; const sx=rand(cw*0.2,cw*0.8), sy=ch*1.02; fireworks.push(new Firework(sx,sy,x,y,color)); }

    function scriptedShow(){
      let t=0; const rounds=14;
      for(let i=0;i<rounds;i++){ const delay=t;
        setTimeout(()=>{ for(let j=0;j<rand(1,3);j++){ const tx=rand(cw*0.15,cw*0.85), ty=rand(ch*0.18,ch*0.45); launch(tx,ty);} },delay);
        t+=rand(240,520);
      }
      setTimeout(()=>{ for(let i=0;i<18;i++) setTimeout(()=>{ const tx=rand(cw*0.2,cw*0.8), ty=rand(ch*0.18,ch*0.5); launch(tx,ty);},i*90); },t+300);
      setTimeout(()=>{ 
        card.classList.add('show'); 
        playHappyBirthday(); 
      },t+2000);
    }

    const envelope=document.getElementById('envelope'), envelopeContainer=document.getElementById('envelopeContainer');
    envelope.addEventListener('click',()=>{
      envelope.classList.add('open');
      setTimeout(()=>{ envelopeContainer.style.display='none'; scriptedShow(); },1500);
    });
  </script>
</body>
</html>
